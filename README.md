# A-Share Quant Selector

åŸºäº Python + akshare çš„Aè‚¡é‡åŒ–é€‰è‚¡ç³»ç»Ÿï¼Œå®ç°ç¢—å£åå¼¹ç­–ç•¥ï¼Œæ”¯æŒWebç®¡ç†ç•Œé¢å’Œé’‰é’‰è‡ªåŠ¨é€šçŸ¥ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ“ˆ **ç¢—å£åå¼¹ç­–ç•¥** - åŸºäºKDJã€è¶‹åŠ¿çº¿å’Œæˆäº¤é‡å¼‚åŠ¨çš„æ™ºèƒ½é€‰è‚¡
- ğŸ”” **è‡ªåŠ¨é€šçŸ¥** - é€‰è‚¡ç»“æœè‡ªåŠ¨æ¨é€åˆ°é’‰é’‰ç¾¤
- ğŸŒ **Webç®¡ç†** - å¯è§†åŒ–æŸ¥çœ‹è‚¡ç¥¨æ•°æ®ã€Kçº¿å›¾ã€KDJæŒ‡æ ‡
- â° **å®šæ—¶ä»»åŠ¡** - æ”¯æŒ crontab æ¯æ—¥è‡ªåŠ¨æ‰§è¡Œ
- ğŸ”„ **æ™ºèƒ½è¿‡æ»¤** - è‡ªåŠ¨è¿‡æ»¤é€€å¸‚ã€STã€å€ºåŸºã€ETFç­‰æ— æ•ˆæ ‡çš„

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Dzy-HW-XD/a-share-quant-selector.git
cd a-share-quant-selector

# 2. å®‰è£…ä¾èµ–
pip3 install -r requirements.txt

# 3. é…ç½®é’‰é’‰é€šçŸ¥ï¼ˆå¯é€‰ï¼‰
# ç¼–è¾‘ config/config.yaml å¡«å†™ webhook å’Œ secret

# 4. é¦–æ¬¡å…¨é‡æŠ“å–æ•°æ®
python3 main.py init

# 5. æ‰§è¡Œé€‰è‚¡
python3 main.py run

# 6. å¯åŠ¨Webç•Œé¢
python3 main.py web
```

## ğŸ“Š ç¢—å£åå¼¹ç­–ç•¥

ç­–ç•¥åŸºäºä»¥ä¸‹é€»è¾‘é€‰è‚¡ï¼š

1. **ä¸Šå‡è¶‹åŠ¿** - çŸ¥è¡ŒçŸ­æœŸè¶‹åŠ¿çº¿ > çŸ¥è¡Œå¤šç©ºçº¿
2. **ä»·æ ¼å›è½** - ä»·æ ¼å›è½è‡³ç¢—ä¸­æˆ–çŸ­æœŸè¶‹åŠ¿çº¿é™„è¿‘(Â±2%)
3. **å¼‚åŠ¨æ£€æµ‹** - è¿‘æœŸ(Må¤©å†…)å­˜åœ¨æ”¾é‡é˜³çº¿(æˆäº¤é‡>=å‰æ—¥*Nå€)
4. **KDJä½ä½** - Jå€¼ <= é˜ˆå€¼ï¼ˆé»˜è®¤30ï¼‰ï¼Œå¤„äºè¶…å–åŒºåŸŸ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.8+** - æ ¸å¿ƒè¯­è¨€
- **akshare** - Aè‚¡å®æ—¶/å†å²æ•°æ®è·å–
- **pandas/numpy** - æ•°æ®å¤„ç†ä¸æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- **Flask** - Webç®¡ç†ç•Œé¢
- **é’‰é’‰æœºå™¨äºº** - æ¶ˆæ¯æ¨é€

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ main.py              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ web_server.py        # WebæœåŠ¡å™¨
â”œâ”€â”€ quant.sh             # å¿«æ·å‘½ä»¤è„šæœ¬
â”œâ”€â”€ strategy/            # ç­–ç•¥æ¨¡å—
â”‚   â”œâ”€â”€ base_strategy.py # ç­–ç•¥åŸºç±»
â”‚   â”œâ”€â”€ bowl_rebound.py  # ç¢—å£åå¼¹ç­–ç•¥
â”‚   â””â”€â”€ strategy_registry.py
â”œâ”€â”€ utils/               # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ akshare_fetcher.py
â”‚   â”œâ”€â”€ csv_manager.py
â”‚   â”œâ”€â”€ technical.py     # æŠ€æœ¯æŒ‡æ ‡(KDJç­‰)
â”‚   â””â”€â”€ dingtalk_notifier.py
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml      # ä¸»é…ç½®
â”‚   â”œâ”€â”€ strategy_params.yaml
â”‚   â””â”€â”€ crontab.txt
â”œâ”€â”€ web/                 # Webå‰ç«¯
â”‚   â”œâ”€â”€ templates/
â”‚   â””â”€â”€ static/
â””â”€â”€ data/                # è‚¡ç¥¨æ•°æ®ï¼ˆCSVæ ¼å¼ï¼‰
```

## ğŸ“ å‘½ä»¤è¯´æ˜

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `python3 main.py init` | é¦–æ¬¡å…¨é‡æŠ“å–6å¹´å†å²æ•°æ® |
| `python3 main.py update` | æ¯æ—¥å¢é‡æ›´æ–° |
| `python3 main.py select` | æ‰§è¡Œé€‰è‚¡ç­–ç•¥ |
| `python3 main.py run` | å®Œæ•´æµç¨‹ï¼ˆæ›´æ–°+é€‰è‚¡+é€šçŸ¥ï¼‰ |
| `python3 main.py web` | å¯åŠ¨Webç•Œé¢ (é»˜è®¤ç«¯å£5000) |

æˆ–ä½¿ç”¨å¿«æ·è„šæœ¬ï¼š
```bash
./quant.sh init
./quant.sh run
./quant.sh web
```

## âš™ï¸ ç­–ç•¥é…ç½®

ç¼–è¾‘ `config/strategy_params.yaml` è°ƒæ•´å‚æ•°ï¼š

```yaml
BowlReboundStrategy:
  N: 4              # æˆäº¤é‡å€æ•°
  M: 15             # å›æº¯å¤©æ•°
  CAP: 4000000000   # æµé€šå¸‚å€¼é—¨æ§›ï¼ˆ40äº¿ï¼‰
  J_VAL: 30         # Jå€¼ä¸Šé™
```

## ğŸŒ Webç•Œé¢

è®¿é—® `http://localhost:5000` å¯æŸ¥çœ‹ï¼š

- ğŸ“Š **ç³»ç»Ÿæ¦‚è§ˆ** - è‚¡ç¥¨æ•°é‡ã€æœ€æ–°æ•°æ®æ—¥æœŸ
- ğŸ“ˆ **è‚¡ç¥¨åˆ—è¡¨** - æ‰€æœ‰è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ï¼Œæ”¯æŒæœç´¢ï¼Œç‚¹å‡»æŸ¥çœ‹Kçº¿å›¾
- ğŸ¯ **é€‰è‚¡ç»“æœ** - æ‰§è¡Œé€‰è‚¡å¹¶æŸ¥çœ‹ä¿¡å·è¯¦æƒ…
- âš™ï¸ **ç­–ç•¥é…ç½®** - åœ¨çº¿ä¿®æ”¹ç­–ç•¥å‚æ•°

## â° å®šæ—¶ä»»åŠ¡

æ·»åŠ åˆ° crontab å®ç°æ¯æ—¥è‡ªåŠ¨é€‰è‚¡ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©15:05æ‰§è¡Œï¼Œä»…å·¥ä½œæ—¥ï¼‰
5 15 * * 1-5 cd /root/quant-csv && /usr/bin/python3 main.py run >> /var/log/quant-csv/run.log 2>&1
```

## ğŸ”§ æ‰©å±•æ–°ç­–ç•¥

1. åœ¨ `strategy/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶ï¼Œç»§æ‰¿ `BaseStrategy`
2. å®ç° `calculate_indicators()` å’Œ `select_stocks()` æ–¹æ³•
3. åœ¨ `config/strategy_params.yaml` æ·»åŠ å‚æ•°
4. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶æ‰§è¡Œ

ç¤ºä¾‹ï¼š
```python
from strategy.base_strategy import BaseStrategy

class MyStrategy(BaseStrategy):
    def __init__(self, params=None):
        super().__init__("æˆ‘çš„ç­–ç•¥", params)
    
    def calculate_indicators(self, df):
        # è®¡ç®—æŒ‡æ ‡
        return df
    
    def select_stocks(self, df, stock_name=''):
        # é€‰è‚¡é€»è¾‘
        return signals
```

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚

## ğŸ“„ License

MIT License

---

**GitHub**: https://github.com/Dzy-HW-XD/a-share-quant-selector
